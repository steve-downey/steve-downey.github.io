<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nikola Blog Infrastructure | What Comes to Mind</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" crossorigin="anonymous">
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="alternate" type="application/atom+xml" title="Atom" hreflang="en" href="../../feed.atom">
<link rel="canonical" href="https://sdowney.org/posts/nikola-blog-infrastructure/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Steve Downey">
<link rel="prev" href="../index.php/2024/05/19/concept-maps-using-c23-library-tech/" title="Concept Maps using C++23 Library Tech" type="text/html">
<meta property="og:site_name" content="What Comes to Mind">
<meta property="og:title" content="Nikola Blog Infrastructure">
<meta property="og:url" content="https://sdowney.org/posts/nikola-blog-infrastructure/">
<meta property="og:description" content="I've migrated from WordPress to a static blog generator–Nikola. This is how it works.




1. Nikola


Nikola is a static site generator written in python. It's mostly boring, which is a very good thin">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-12-23T13:15:27-05:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@sdowney.org">
<meta name="twitter:creator" content="@sdowney">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../">

            <span id="blog-title">What Comes to Mind</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archives</a>
                </li>
<li class="nav-item">
<a href="../../categories/index.html" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="mailto:sdowney@sdowney.dev" class="nav-link"><i class="fa fa-envelope"></i></a>
                </li>
<li class="nav-item">
<a href="https://github.com/steve-downey" class="nav-link">GitHub <i class="fa-brands fa-square-github"></i></a>
                </li>
<li class="nav-item">
<a href="https://mastodon.social/@Sdowney" class="nav-link">Mastodon <i class="fa-brands fa-mastodon"></i></a>
                </li>
<li class="nav-item">
<a href="https://bsky.app/profile/sdowney.bsky.social" class="nav-link">Bluesky <i class="fa-brands fa-square-bluesky"></i></a>
                </li>
<li class="nav-item">
<a href="../../feed.atom" class="nav-link">ATOM <i class="fa-solid fa-atom"></i></a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS <i class="fa-solid fa-rss"></i></a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Nikola Blog Infrastructure</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Steve Downey
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2024-12-23T13:15:27-05:00" itemprop="datePublished" title="2024-12-23 13:15">2024-12-23 13:15</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="abstract" id="org2bc1ab1">
<p>
I've migrated from WordPress to a static blog generator–Nikola. This is how it works.
</p>

</div>
<div id="outline-container-orgb1164a2" class="outline-2">
<h2 id="orgb1164a2">
<span class="section-number-2">1.</span> Nikola</h2>
<div class="outline-text-2" id="text-1">
<p>
Nikola is a static site generator written in python. It's mostly boring, which is a very good thing for software meant for use to be. Its home is <a href="https://getnikola.org">https://getnikola.org</a> and the source is on github at <a href="https://github.com/getnikola/nikola">https://github.com/getnikola/nikola</a>. It's many years old at this point, but not dead.
</p>

<p>
The interesting part for me is that someone had already written a plugin that compiled org mode files, my preferred markup language, to the html that Nikola wants to publish. It wasn't quite to my tastes, but the changes were all on the org export side in elisp, and the python invocation of emacs to do the translation didn't need particular changes. That update is at <a href="https://github.com/steve-downey/wctm/tree/src/plugins/orgmode">https://github.com/steve-downey/wctm/tree/src/plugins/orgmode</a>.
</p>

<p>
I've also set up staging at a github pages repo rendered at <a href="https://steve-downey.github.io/">https://steve-downey.github.io/</a> since it's a static site. The real version is at <a href="https://sdowney.org">https://sdowney.org</a>.
</p>

<p>
Conversion was straightforward using the tools that Nikola provided and <a href="https://getnikola.com/handbook.html#importing-your-wordpress-site-into-nikola">following the directions</a> for importing a WordPress xml backup.
</p>
</div>
</div>
<div id="outline-container-org58b22ac" class="outline-2">
<h2 id="org58b22ac">
<span class="section-number-2">2.</span> Orgmode plugin</h2>
<div class="outline-text-2" id="text-2">
<p>
Pulling a plugin into my working site was easy
</p>
<div class="org-src-container">
<pre class="src src-zsh">nikola plugin -i orgmode
</pre>
</div>
<p>
copied the code from <a href="https://github.com/getnikola/plugins/tree/master/v8/orgmode">https://github.com/getnikola/plugins/tree/master/v8/orgmode</a> and I just had to update the main configuration file, <code>conf.py</code>, to map org files to the orgmode compiler.
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="org-variable-name">COMPILERS</span> <span class="org-operator">=</span> {
    <span class="org-string">"rest"</span>: [<span class="org-string">'.txt'</span>, <span class="org-string">'.rst'</span>],
    <span class="org-string">"markdown"</span>: [<span class="org-string">'.md'</span>, <span class="org-string">'.mdown'</span>, <span class="org-string">'.markdown'</span>],
    <span class="org-string">"html"</span>: [<span class="org-string">'.html'</span>, <span class="org-string">'.htm'</span>],
    <span class="org-string">"orgmode"</span>: [<span class="org-string">'.org'</span>],
}
</pre>
</div>

<p>
I then updated the source code for the elisp html exporter using code from <a href="https://github.com/steve-downey/wg21org/blob/main/emacs.d/init.el">https://github.com/steve-downey/wg21org/blob/main/emacs.d/init.el</a> which installs org from upstream rather than using the built-in orgmode and configures my preferences. I may end up using more of <a href="https://github.com/steve-downey/wg21org/blob/main/ox-wg21html.el">ox-wg21html.el</a> as a framework for the exported HTML, only updating to use Bootstrap for css classes instead of my own or the org builtin.
</p>
</div>
</div>
<div id="outline-container-orgc47cd15" class="outline-2">
<h2 id="orgc47cd15">
<span class="section-number-2">3.</span> LaTeX support via KaTeX</h2>
<div class="outline-text-2" id="text-3">
<p>
I've configure Nikola to support LaTeX via KaTeX rather than MathJax. It is supposed to be a bit faster. This means <b>inline</b> math like \(x^2\) or \(1 &lt; 2\) or with breaks like:
  \[
  \int_0^\infty e^{-x^2} dx = {{\sqrt{\pi}} \over {2}}
  \]
Or in running text where I want to mention \[ \frac{-b \pm \sqrt{b^2 - 4 a c}}{2a} \] as the quadratic equation.
It does mean I don't have access to latex blocks like
</p>
<div class="org-src-container">
<pre class="src src-latex"><span class="org-font-latex-sedate"><span class="org-keyword">\begin</span></span>{<span class="org-function-name">equation</span>}
<span class="org-font-latex-math">  n</span><span class="org-font-latex-math"><span class="org-font-latex-script-char">_{i+1}</span></span><span class="org-font-latex-math"> = </span><span class="org-font-latex-sedate"><span class="org-font-latex-math">\frac</span></span><span class="org-font-latex-math">{n</span><span class="org-font-latex-math"><span class="org-font-latex-script-char">_{i}</span></span><span class="org-font-latex-math"> (d-i) (e-1)}{(i+1)}</span>
<span class="org-font-latex-sedate"><span class="org-keyword">\end</span></span>{<span class="org-function-name">equation</span>}
</pre>
</div>

<p>
Maybe I won't miss it.
</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../index.php/2024/05/19/concept-maps-using-c23-library-tech/" rel="prev" title="Concept Maps using C++23 Library Tech">Previous post</a>
            </li>
        </ul></nav></aside><script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script><script>
                renderMathInElement(document.body,
                    {
                        
delimiters: [
    {left: "$$", right: "$$", display: true},
    {left: "\\[", right: "\\]", display: true},
    {left: "\\begin{equation*}", right: "\\end{equation*}", display: true},
    {left: "$", right: "$", display: false},
    {left: "\\(", right: "\\)", display: false}
]

                    }
                );
            </script></article><!--End of body content--><footer id="footer">
            Contents © 2024         <a href="mailto:sdowney@sdowney.dev">Steve Downey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a> - 
 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
 <img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script src="../../assets/js/luxon.min.js"></script><!-- fancy dates --><script>
        luxon.Settings.defaultLocale = "en";
        fancydates(2, {"preset": false, "format": "yyyy-MM-dd HH:mm"});
        </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VGV27RDN3E"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VGV27RDN3E');
</script>
</body>
</html>
