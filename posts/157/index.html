<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>C++ code in Org-mode | What Comes to Mind</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="stylesheet" href="../../assets/css/rst.min.css">
<link rel="stylesheet" href="../../assets/css/foundation.min.css">
<link rel="stylesheet" href="../../assets/css/app.css">
<link rel="stylesheet" href="../../assets/css/modus-vivendi-tinted.css">
<link href="../../assets/css/custom.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="alternate" type="application/atom+xml" title="Atom" href="../../feed.atom">
<link rel="canonical" href="https://sdowney.org/posts/157/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Steve Downey">
<link rel="prev" href="../index.php/2016/10/23/building-emacs-25-1-on-ubuntu-16-10/" title="Building Emacs 25.1 on Ubuntu 16.10" type="text/html">
<link rel="next" href="../index.php/2016/10/29/spingate/" title="spingate" type="text/html">
<meta property="og:site_name" content="What Comes to Mind">
<meta property="og:title" content="C++ code in Org-mode">
<meta property="og:url" content="https://sdowney.org/posts/157/">
<meta property="og:description" content='1 C++

 This is a simple example with one c++ file, all in one src code block. 



#include &lt;iostream&gt;

int main()
{
    std::cout &lt;&lt; "Hello World++! 2.9";
}




 The src block looks like: 


    #+HE'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-10-28T18:32:00-04:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@sdowney.org">
<meta name="twitter:creator" content="@sdowney">
</head>
<body>

    

    
<div class="top-bar">
<div class="top-bar-left">
<ul class="menu">
<li class="menu-text"><a href="https://sdowney.org/" title="What Comes to Mind" rel="home">What Comes to Mind</a></li>
                <li><a href="../../archive.html">Archives</a></li>
                <li><a href="../../categories/index.html">Tags</a></li>
                <li><a href="mailto:sdowney@sdowney.dev"><i class="fa fa-envelope"></i></a></li>
                <li><a href="https://github.com/steve-downey">GitHub <i class="fa-brands fa-square-github"></i></a></li>
                <li><a href="https://mastodon.social/@Sdowney">Mastodon <i class="fa-brands fa-mastodon"></i></a></li>
                <li><a href="https://bsky.app/profile/sdowney.bsky.social">Bluesky <i class="fa-brands fa-square-bluesky"></i></a></li>
                <li><a href="../../feed.atom">ATOM <i class="fa-solid fa-atom"></i></a></li>
                <li><a href="../../rss.xml">RSS <i class="fa-solid fa-rss"></i></a></li>
    
    
    </ul>
</div>
</div>

    

<div class="callout large primary">
<div class="row column text-center">

    <h1>C++ code in Org-mode</h1>
    <h2 class="subheader"><small>2016-10-28 18:32</small></h2>

</div>
</div>

<div class="row medium-8 large-7 columns">

<div class="blog-post">
    
    


    <div id="outline-container-orgheadline1" class="outline-2">
<h3 id="orgheadline1">
<span class="section-number-2">1</span> C++</h3>
<div class="outline-text-2" id="text-1">
 This is a simple example with one c++ file, all in one src code block. 

<div class="org-src-container">

<pre class="src src-C++"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;iostream&gt;</span>

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello World++! 2.9"</span>;
}
</pre>
</div>


 The src block looks like: 

<pre class="example">
    #+HEADERS: :tangle hello.c++ :exports code :eval never
    #+BEGIN_SRC C++
    // source code
    #+END_SRC
</pre>

 The HEADERS block is on a separate line because when the buffer is evaluated, code will get run, and the SRC blocks will get rewritten, as well as the RESULTS blocks. Since we want the headers to be preserved, we can't make them part of the SRC block. 

 You can also tangle a Makefile. 

<div class="org-src-container">

<pre class="src src-makefile"><span class="org-makefile-targets">clean</span>:
    <span class="org-type">-</span><span class="org-makefile-shell">rm hello</span>

<span class="org-makefile-targets">hello</span>:  hello.c++
    clang++ hello.c++ -o hello
</pre>
</div>

 With the org mode headers exporting the code, and not evaluating this block. Just like the C++ code. We'll evaluate the makefile, and run the program, a bit further down. 

<pre class="example">
    #+HEADERS: :tangle Makefile :exports code :eval never
    #+BEGIN_SRC makefile
    # Makefile
    #+END_SRC
</pre>

 Now, we tangle the code out to the files. 

<pre class="example">
    #+NAME: tangle-buffer
    #+HEADERS: :exports both :results value
    #+BEGIN_SRC emacs-lisp
    (org-babel-tangle)
    #+END_SRC
</pre>

<div class="org-src-container">

<pre class="src src-emacs-lisp" id="orgsrcblock1">(org-babel-tangle)
</pre>
</div>

 That will write out two files when the buffer is evaluated using org-babel-execute-buffer, bound to \C-c \C-v b. 

 Give this block a name, so that where the results go can be controlled. Do that by giving the RESULTS block the name of the SRC block. Org will then produce a table of the results of executing the elisp, which is the two files produced. 

 And put the results here: 

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<tbody><tr>
<td class="org-left">hello.c++</td>
<td class="org-left">Makefile</td>
</tr></tbody>
</table>


 Next, we run make with the target to compile the code. You could also simply write the compiler command here. 

<pre class="example">
    #+NAME: make-clean-hello
    #+BEGIN_SRC sh :exports both :results output
    make clean
    make hello
    #+END_SRC
</pre>

<div class="org-src-container">

<pre class="src src-sh" id="orgsrcblock2">make clean
make hello
</pre>
</div>

 And make will run our compilation as spec'd in the Makefile we just tangled out. 

<pre class="example">
rm hello
clang++ hello.c++ -o hello
</pre>


 And now get the output by running the program. 

<pre class="example">
    #+NAME: run-hello
    #+BEGIN_SRC sh :exports results
    ./hello
    #+END_SRC
</pre>

 Which prints out our hello, world text. Which is has version number to convince myself it gets updated. 

<pre class="example">
Hello World++! 2.9
</pre>
</div>
</div>

    <div class="callout">
    <ul class="menu simple">
<li>Author: Steve Downey</li>

    </ul>
</div>
    

    
        <div class="column row">
            <ul class="pagination" role="navigation" aria-label="Pagination">
<li>
                    <a href="../index.php/2016/10/23/building-emacs-25-1-on-ubuntu-16-10/" rel="prev" title="Building Emacs 25.1 on Ubuntu 16.10">« <span class="show-for-sr">Previous post</span></a>
                </li>
                <li>
                    <a href="../index.php/2016/10/29/spingate/" rel="next" title="spingate" aria-label="Next page">» <span class="show-for-sr">Next post</span></a>
                </li>
            </ul>
</div>

    
    


</div>



<hr>
<footer id="footer"><p><small>Contents © 2025         <a href="mailto:sdowney@sdowney.dev">Steve Downey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a> - 
 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
 <img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a></small></p>
            
        </footer>
</div>

    



<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VGV27RDN3E"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VGV27RDN3E');
</script>
</body>
</html>
